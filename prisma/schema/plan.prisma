model Plan {
  id          String    @id @default(uuid())
  coverAvatar String?
  coverEmoji  String    @default("ü¶å")
  color       PlanColor @default(Green)
  title       String
  desc        String

  school String?

  // ÊâìÂç°Êó•ÊúüÊÉÖÂÜµ
  checkedDays         DateTime[] @default([])
  postiveCheckedDays  DateTime[] @default([])
  negativeCheckedDays DateTime[] @default([])

  postiveLongestStartDate   DateTime?
  postiveLongestEndDate     DateTime?
  postiveLongestCheckedDays Int       @default(0)

  postiveLastestConsutiveStartDate  DateTime?
  postiveLastestConsutiveEndDate    DateTime?
  postiveLatestConsutiveCheckedDays Int       @default(0)

  negativeLongestStartDate   DateTime?
  negativeLongestEndDate     DateTime?
  negativeLongestCheckedDays Int       @default(0)

  negativeLastestConsutiveStartDate  DateTime?
  negativeLastestConsutiveEndDate    DateTime?
  negativeLatestConsutiveCheckedDays Int       @default(0)

  officalPlanType PlanOfficalType @default(NotOffical)

  userId Int
  user   User @relation(fields: [userId], references: [id])

  everdayShouldCheckTimes Int              @default(10)
  planDayChecked          PlanDayChecked[]
  posts                   Post[]

  continuousCheckDay    Int @default(0)
  maxContinuousCheckDay Int @default(0)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([id, userId])
  @@index([id, userId])
}

model PlanDayChecked {
  id     String @id @default(uuid())
  planId String
  plan   Plan   @relation(fields: [planId], references: [id])

  checkedTimes Int @default(0)

  date   DateTime
  year   Int
  month  Int
  day    Int
  status PlanCheckStatusEnum

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  post Post?

  @@unique([id, planId, date])
  @@index([id, planId, year, date])
}

enum PlanCheckStatusEnum {
  Positive
  Negative
}

enum PlanOfficalType {
  SexLimit
  NotOffical
}

enum PlanColor {
  Green
}
